{"ast":null,"code":"export const getCartKey = () => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  return user ? `user_cart_${user.username}` : \"guest_cart\";\n};\nexport const getCart = () => {\n  return JSON.parse(localStorage.getItem(getCartKey())) || [];\n};\nexport const saveCart = cart => {\n  localStorage.setItem(getCartKey(), JSON.stringify(cart));\n};\nexport const addToCart = product => {\n  let cart = getCart();\n  const found = cart.find(i => i.id === product.id && i.size === product.size && i.color === product.color);\n  if (found) {\n    cart = cart.map(i => i === found ? {\n      ...i,\n      qty: i.qty + 1\n    } : i);\n  } else {\n    cart.push({\n      ...product,\n      qty: 1\n    });\n  }\n  saveCart(cart);\n};","map":{"version":3,"names":["getCartKey","user","JSON","parse","localStorage","getItem","username","getCart","saveCart","cart","setItem","stringify","addToCart","product","found","find","i","id","size","color","map","qty","push"],"sources":["D:/react1/gifts/impressive-gift/src/utils/cart.js"],"sourcesContent":["export const getCartKey = () => {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  return user ? `user_cart_${user.username}` : \"guest_cart\";\r\n};\r\n\r\nexport const getCart = () => {\r\n  return JSON.parse(localStorage.getItem(getCartKey())) || [];\r\n};\r\n\r\nexport const saveCart = (cart) => {\r\n  localStorage.setItem(getCartKey(), JSON.stringify(cart));\r\n};\r\n\r\nexport const addToCart = (product) => {\r\n  let cart = getCart();\r\n  const found = cart.find(\r\n    (i) => i.id === product.id && i.size === product.size && i.color === product.color\r\n  );\r\n\r\n  if (found) {\r\n    cart = cart.map((i) =>\r\n      i === found ? { ...i, qty: i.qty + 1 } : i\r\n    );\r\n  } else {\r\n    cart.push({ ...product, qty: 1 });\r\n  }\r\n\r\n  saveCart(cart);\r\n};\r\n"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAGA,CAAA,KAAM;EAC9B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,OAAOJ,IAAI,GAAG,aAAaA,IAAI,CAACK,QAAQ,EAAE,GAAG,YAAY;AAC3D,CAAC;AAED,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAC3B,OAAOL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACL,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;AAC7D,CAAC;AAED,OAAO,MAAMQ,QAAQ,GAAIC,IAAI,IAAK;EAChCL,YAAY,CAACM,OAAO,CAACV,UAAU,CAAC,CAAC,EAAEE,IAAI,CAACS,SAAS,CAACF,IAAI,CAAC,CAAC;AAC1D,CAAC;AAED,OAAO,MAAMG,SAAS,GAAIC,OAAO,IAAK;EACpC,IAAIJ,IAAI,GAAGF,OAAO,CAAC,CAAC;EACpB,MAAMO,KAAK,GAAGL,IAAI,CAACM,IAAI,CACpBC,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,IAAID,CAAC,CAACE,IAAI,KAAKL,OAAO,CAACK,IAAI,IAAIF,CAAC,CAACG,KAAK,KAAKN,OAAO,CAACM,KAC/E,CAAC;EAED,IAAIL,KAAK,EAAE;IACTL,IAAI,GAAGA,IAAI,CAACW,GAAG,CAAEJ,CAAC,IAChBA,CAAC,KAAKF,KAAK,GAAG;MAAE,GAAGE,CAAC;MAAEK,GAAG,EAAEL,CAAC,CAACK,GAAG,GAAG;IAAE,CAAC,GAAGL,CAC3C,CAAC;EACH,CAAC,MAAM;IACLP,IAAI,CAACa,IAAI,CAAC;MAAE,GAAGT,OAAO;MAAEQ,GAAG,EAAE;IAAE,CAAC,CAAC;EACnC;EAEAb,QAAQ,CAACC,IAAI,CAAC;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}